<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>New Paths Forward: AI, Humanity, and the Next Era of Education</title>
<!-- Add favicon -->
<link href="favicon.ico" rel="icon" type="image/x-icon"/>
<!-- Fallback text-based favicon if favicon.ico doesn't exist -->
<link href="data:image/svg+xml,&lt;svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'&gt;&lt;text y='.9em' font-size='90' font-family='serif' font-weight='bold' fill='%2398252b'&gt;LC&lt;/text&gt;&lt;/svg&gt;" rel="icon"/>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"/>
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css" rel="stylesheet"/>
<style>
        /* Loomis Chaffee Brand Colors */
        :root {
            --lc-red: #98252b;
            --lc-gray: #323e47;
            --cupola: #5CB8B7;
            --cupola-light: #A0D2D1;
            --river: #4E738A;
            --river-light: #92A6B5;
            --meadow: #FFDD7F;
            --meadow-light: #FFE8B0;
            --brick: #C25131;
            --brick-light: #E1947D;
            --accent-red: #FC5A5C;
            --pelican: #d1d5d8;
            --pelican-light: #e5e7eb;

            /* Colors for Time Blocks */
            --time-block-1: var(--lc-red);
            --time-block-1-light: #C77C77;
            --time-block-2: var(--meadow);
            --time-block-2-light: var(--meadow-light);
            --time-block-3: var(--brick);
            --time-block-3-light: var(--brick-light);

             /* Filter Tag Colors Cycle */
             --filter-color-1: var(--cupola-light);
             --filter-color-2: var(--river-light);
             --filter-color-3: var(--meadow-light);
             --filter-color-4: var(--brick-light);
             --filter-color-5: var(--pelican);
             --filter-text-color-1: var(--lc-gray);
             --filter-text-color-2: white;
             --filter-text-color-3: var(--lc-gray);
             --filter-text-color-4: white;
             --filter-text-color-5: var(--lc-gray);

             /* Active Filter Colors */
             --filter-active-color-1: var(--cupola);
             --filter-active-color-2: var(--river);
             --filter-active-color-3: var(--meadow);
             --filter-active-color-4: var(--brick);
             --filter-active-color-5: var(--lc-gray);
             --filter-active-text-color-1: white;
             --filter-active-text-color-2: white;
             --filter-active-text-color-3: var(--lc-gray);
             --filter-active-text-color-4: white;
             --filter-active-text-color-5: white;
        }

        body {
            /* Updated default font to Serif per request */
            font-family: 'Financier Display', Georgia, serif; /* Assuming Financier Display is loaded */
            color: var(--lc-gray);
            background-color: #f9f9f9;
            font-size: 16px;
            font-weight: 400; /* Default to regular weight */
        }

        /* Let headings inherit body font, adjust weights as needed */
        h1, h2, h3, h4, h5 {
             font-weight: 400; /* Reset to default, specific weights below */
        }
         h1 { font-size: 2.5rem; font-weight: 600; } /* Semi-Bold */
         h2 { font-size: 2rem; font-weight: 500; } /* Medium */
         h3 { font-size: 1.75rem; font-weight: 500; }
         /* Filter titles use the default serif font now */
         h4.filter-title {
             font-size: 1.1rem; 
             font-weight: 500; /* Medium weight */
             color: var(--lc-gray); /* Use main gray color */
             margin-bottom: 0.75rem;
         }
         h5 { font-size: 1.15rem; font-weight: 500; margin-bottom: 0.25rem;} /* Session titles */
         h6.card-subtitle {
             /* Inherits Financier Display */
             font-size: 0.9rem;
             margin-bottom: 0.5rem !important;
             font-weight: 400; /* Regular weight */
             color: #555; /* Slightly lighter subtitle */
         }


        .lc-header {
            background-color: var(--lc-red);
            color: white;
            padding: 1rem 0;
            display: flex;
            align-items: center;
        }

        .lc-header .container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            width: 100%;
        }

        .lc-logo {
            height: 60px;
            width: auto;
        }

        .header-red {
            color: var(--lc-red);
        }

        /* Navigation tab styling */
        .nav-tabs {
            margin-bottom: 1.5rem;
            border-bottom: 2px solid var(--lc-red);
        }

        .nav-tabs .nav-link {
            color: var(--lc-gray);
            font-weight: 500;
            border: none;
            padding: 0.75rem 1.5rem;
        }

        .nav-tabs .nav-link.active {
            color: white;
            background-color: var(--lc-red);
        }

        .session-card {
            background-color: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            position: relative;
            overflow: hidden;
            cursor: pointer;
            transition: transform 0.2s ease-out, box-shadow 0.2s ease-out;
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .session-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 6px 16px rgba(0,0,0,0.12);
            z-index: 2;
        }

        .session-card .session-title {
            font-weight: 600;
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
            color: var(--lc-gray);
            /* padding-right: 90px; */ /* Removed padding */
            /* NEW Flexbox solution */
            display: flex;
            justify-content: space-between; /* Pushes title and (future) badge apart */
            align-items: flex-start; /* Align items at the top */
            /* The title itself should not shrink if the badge is present */
        }

        .session-card .session-title > span { /* Wrap title text in a span for flex control */
            flex-grow: 1; /* Allows title to take available space */
            padding-right: 5px; /* Small space between title and where badge would be if inline */
        }

        .session-card .session-presenter {
            font-size: 0.9rem;
            color: #555;
            margin-bottom: 0.75rem;
        }

        .session-card .session-room,
        .session-card .session-time { /* session-time might be new for index/schedule */
            font-size: 0.85rem;
            color: var(--lc-gray);
            margin-bottom: 0.25rem;
            font-weight: 500;
        }

        .session-card .session-meta-item { /* For icon + text, e.g., room/time */
            display: flex;
            align-items: center;
            margin-bottom: 0.3rem;
            font-size: 0.85rem;
            color: var(--lc-gray);
            font-weight: 500;
        }
        .session-card .session-meta-item i { /* For Bootstrap Icons */
            margin-right: 0.4rem;
            color: var(--lc-red);
            font-size: 0.9em;
            line-height: 1;
        }

        .session-card .session-tags {
            margin-top: auto;
            padding-top: 0.5rem;
        }

        /* Strand indicator on the left */
        .session-card .strand-indicator {
            position: absolute;
            top: 0;
            left: 0;
            width: 6px;
            height: 100%;
        }
        .session-card.strand1 .strand-indicator { background-color: var(--cupola); }
        .session-card.strand2 .strand-indicator { background-color: var(--brick); }
        .session-card.strand3 .strand-indicator { background-color: var(--lc-gray); }
        .session-card.strandSpecial .strand-indicator { background-color: var(--meadow); }

        /* Session type badge on the top right */
        .session-card .session-type {
            position: absolute;
            top: 10px;
            right: 10px;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-size: 0.7rem;
            font-weight: 600;
            color: white;
            line-height: 1;
            /* text-transform: uppercase; */ /* REMOVED to prevent all caps */
        }

        .session-card .type-workshop { background-color: var(--lc-red); color: white; }
        .session-card .type-presentation { background-color: var(--meadow); color: var(--lc-gray); }
        .session-card .type-discussion { background-color: var(--brick); color: white; }
        .session-card .type-panel { background-color: var(--river); color: white; }
        .session-card .type-keynote { background-color: var(--lc-gray); color: white; }
        .session-card .type-facilitated { background-color: var(--cupola); color: white; }
        .session-card .type-special { background-color: var(--pelican); color: var(--lc-gray); }
        .session-card .type-placeholder,
        .session-card .type-default {
             background-color: var(--pelican-light); color: var(--lc-gray);
        }

        /* === TAG STYLES (Derived from calendar.html) === */
        .tag {
            display: inline-block;
            padding: 0.3rem 0.7rem;
            margin-right: 0.5rem;
            margin-bottom: 0.5rem;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 500;
            line-height: 1;
            border: 1px solid transparent;
            background-color: var(--pelican-light);
            color: var(--lc-gray);
        }
        .tag:hover {
            background-color: var(--pelican);
            border-color: var(--lc-gray);
        }
        /* === END TAG STYLES === */

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .session-card {
                flex-direction: column;
                height: auto;
            }
        }

        /* --- Filter Button Styles --- */
        .filter-buttons-container {
             display: flex;
             flex-wrap: wrap;
             gap: 0.4rem;
        }

        .btn-filter {
            appearance: none;
            background: none;
            border: none;
            font: inherit; /* Inherit Financier Display from body */
            cursor: pointer;
            outline: inherit;
            display: inline-block;
            padding: 0.3rem 0.7rem;
            margin: 0;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 400; /* Regular weight */
            line-height: 1.2;
            text-align: center;
            border: 1px solid #ddd;
            transition: all 0.2s ease-in-out;
            opacity: 0.9;
            background-color: var(--pelican-light);
            color: var(--lc-gray);
        }

        .btn-filter:hover {
            opacity: 1;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            transform: translateY(-1px);
        }

        .btn-filter.active {
            opacity: 1;
            font-weight: 600; /* Semi-Bold weight when active */
            box-shadow: inset 0 1px 2px rgba(0,0,0,0.1);
            border-width: 1px;
            transform: scale(1.02);
        }

        /* General 'All' button style */
        .btn-filter-all {
            background-color: var(--pelican);
            color: var(--lc-gray);
            font-weight: 600; /* Semi-Bold 'All' button */
            border-color: #bbb;
        }
        .btn-filter-all.active {
            background-color: var(--lc-gray);
            color: white;
            border-color: var(--lc-gray);
        }

        /* Specific Filter Button Colors */
        .btn-filter.color-1 { background-color: var(--filter-color-1); color: var(--filter-text-color-1); border-color: var(--filter-color-1); }
        .btn-filter.color-2 { background-color: var(--filter-color-2); color: var(--filter-text-color-2); border-color: var(--filter-color-2); }
        .btn-filter.color-3 { background-color: var(--filter-color-3); color: var(--filter-text-color-3); border-color: var(--filter-color-3); }
        .btn-filter.color-4 { background-color: var(--filter-color-4); color: var(--filter-text-color-4); border-color: var(--filter-color-4); }
        .btn-filter.color-5 { background-color: var(--filter-color-5); color: var(--filter-text-color-5); border-color: var(--filter-color-5); }

        .btn-filter.color-1.active { background-color: var(--filter-active-color-1); color: var(--filter-active-text-color-1); border-color: var(--filter-active-color-1); }
        .btn-filter.color-2.active { background-color: var(--filter-active-color-2); color: var(--filter-active-text-color-2); border-color: var(--filter-active-color-2); }
        .btn-filter.color-3.active { background-color: var(--filter-active-color-3); color: var(--filter-active-text-color-3); border-color: var(--filter-active-color-3); }
        .btn-filter.color-4.active { background-color: var(--filter-active-color-4); color: var(--filter-active-text-color-4); border-color: var(--filter-active-color-4); }
        .btn-filter.color-5.active { background-color: var(--filter-active-color-5); color: var(--filter-active-text-color-5); border-color: var(--filter-active-color-5); }

        /* --- End Filter Button Styles --- */

        footer {
            background-color: var(--lc-gray);
            color: white;
            padding: 2rem 0;
            margin-top: 3rem;
        }

        .hidden {
            display: none !important;
        }

        /* --- NEW Description Expansion Styles --- */
        .session-description-wrapper {
            position: relative;
            overflow: hidden; /* Important for max-height */
            /* Set max-height for collapsed state (e.g., approx 3 lines) */
            max-height: 4.5em; /* Adjust this value (line-height * lines) */
            transition: max-height 0.4s ease-in-out; /* Smooth transition */
            /* cursor: pointer; */ /* Removed, button handles click */
            margin-bottom: 0.5rem; /* Space before button */
            /* Add a fade-out effect when collapsed */
            -webkit-mask-image: linear-gradient(to bottom, black 70%, transparent 100%);
            mask-image: linear-gradient(to bottom, black 70%, transparent 100%);
        }

        .session-description-wrapper.expanded {
            max-height: 1000px; /* Large enough value for any content */
            cursor: default;
            /* Remove fade-out when expanded */
            -webkit-mask-image: none;
            mask-image: none;
        }

        .session-description-content {
            /* Styles for the actual text content */
            font-size: 0.9rem;
            line-height: 1.5; /* Use this to calculate max-height */
            color: var(--lc-gray);
             white-space: pre-wrap; /* Respect newlines from HTML */
        }
        /* Remove <p> margins if description_html uses them */
        .session-description-content p {
            margin-bottom: 0.5em; /* Space between paragraphs */
        }
        .session-description-content p:last-child {
             margin-bottom: 0; /* No extra space after last paragraph */
        }

        /* Toggle button style */
         .toggle-description {
             background-color: transparent;
             border: 1px solid var(--lc-gray);
             color: var(--lc-gray);
             padding: 0.1rem 0.4rem; /* Made button smaller */
             border-radius: 3px; /* Adjusted border-radius */
             font-size: 0.65rem; /* Made button smaller */
             cursor: pointer;
             transition: background-color 0.2s, color 0.2s;
             font-weight: 400; /* Regular weight */
             /* float: right; */ /* Removed float right for left alignment */
             /* margin-top: 0.25rem; */ /* Removed margin-top */
             margin-bottom: 0.5rem; /* Add some space below the button */
             align-self: flex-start; /* Align button to the left within flex container */
         }
         .toggle-description:hover {
             background-color: var(--lc-gray);
             color: white;
         }
        /* --- END Description Expansion Styles --- */


        .session-badge-container {
             display: flex;
             gap: 0.4rem;
             align-items: center;
        }

        /* Session details badges (Time, Location) */
        .session-details {
            margin-top: 0.5rem !important;    /* Increased from 0.1rem */
            margin-bottom: 0.75rem !important; /* Increased from 0.1rem */
            display: flex;
            flex-wrap: wrap;
            gap: 0.3rem;  /* Increased from 0.1rem */
        }

        .session-details .badge {
            font-weight: 400;
            font-size: 0.8rem;
            padding: 0.3rem 0.7rem;
            background-color: var(--pelican) !important;
            color: var(--lc-gray) !important;
            border: none;
            border-radius: 6px;
            display: inline-flex;
            align-items: center;
            /* Inherits body font */
        }

        .session-details .badge i {
            margin-right: 4px;
            font-size: 0.9em;
        }

        /* Tags section within the card body */
        .session-tags {
            margin-top: 0.75rem;
            padding-top: 0.5rem;
            border-top: 1px solid #eee;
        }
        .session-tags .tag {
             background-color: var(--pelican-light);
             color: var(--lc-gray);
             border: 1px solid var(--pelican);
             font-size: 0.7rem;
             padding: 0.2rem 0.5rem;
             margin-bottom: 0.25rem;
             margin-right: 0.25rem;
        }
        .session-tags strong {
            font-size: 0.8rem;
            font-weight: 600; /* Semi-Bold label */
            color: var(--lc-gray);
            display: block;
            margin-bottom: 0.25rem;
        }


        /* Loading indicator styles */
        #loading {
            text-align: center;
            padding: 40px 20px;
            font-size: 1.2rem;
            color: var(--lc-red);
        }

        .spinner-border {
            width: 3rem;
            height: 3rem;
            margin-bottom: 1rem;
            color: var(--lc-red);
        }

        /* No results message */
        #no-results {
             margin-top: 2rem;
             padding: 1.5rem;
             font-size: 1.1rem;
        }

         /* Search button style */
         #search-button {
             border-color: var(--lc-gray);
             color: var(--lc-gray);
         }
         #search-button:hover {
             background-color: var(--lc-gray);
             color: white;
         }
         /* Clear button style */
         #clear-filters-button {
             border-color: var(--lc-red);
             color: var(--lc-red);
             font-weight: 600; /* Semi-Bold clear button */
         }
         #clear-filters-button:hover {
             background-color: var(--lc-red);
             color: white;
         }

        /* Increase spacing between card elements */
        .card-title {
            margin-bottom: 0.5rem !important; /* Increased from 0.25rem */
        }
        .card-subtitle {
            margin-bottom: 0.5rem !important; /* Increased from 0.25rem */
        }
        .session-details {
            margin-top: 0.5rem !important;    /* Increased from 0.1rem */
            margin-bottom: 0.75rem !important; /* Increased from 0.1rem */
            display: flex;
            flex-wrap: wrap;
            gap: 0.3rem;  /* Increased from 0.1rem */
        }
        .session-description-wrapper {
            margin-top: 0.5rem;  /* Increased from 0.25rem */
            margin-bottom: 0.5rem;  /* Increased from 0.25rem */
        }

        /* Fix strand 2 filter button color to match card */
        .btn-filter[data-filter="strand2"] { 
            background-color: var(--brick-light); 
            border-color: var(--brick-light);
            color: white;
        }
        .btn-filter[data-filter="strand2"].active { 
            background-color: var(--brick); 
            border-color: var(--brick);
            color: white;
        }
    </style>
</head>
<body>
<header class="lc-header">
<div class="container">
<a href="#" onclick="location.reload(); return false;">
<img alt="Loomis Chaffee Logo" class="lc-logo" onerror="this.style.display='none'; console.error('Logo image not found.');" src="logo.png"/>
</a>
</div>
</header>
<div class="container py-4">
<div class="row mb-4">
<div class="col-12">
<ul class="nav nav-tabs">
<li class="nav-item">
<a class="nav-link active" href="index.html">Session Listing</a>
</li>
<li class="nav-item">
<a class="nav-link" href="schedule.html">Schedule</a>
</li>
<li class="nav-item">
<a class="nav-link" href="calendar.html">Calendar View</a>
</li>
</ul>
</div>
</div>
<div class="row">
<div class="col-lg-3">
<div class="filter-group-wrapper">
<div class="filter-group">
<h4 class="filter-title">Filter by Strand</h4>
<div class="filter-buttons-container" id="strand-filters">
<button class="btn btn-filter btn-filter-all active" data-filter="all" onclick="toggleFilter('strand', 'all', this)">All Strands</button>
<button class="btn btn-filter color-1" data-filter="strand1" onclick="toggleFilter('strand', 'strand1', this)">1: AI in the Classroom</button>
<button class="btn btn-filter color-2" data-filter="strand2" onclick="toggleFilter('strand', 'strand2', this)">2: Human-Centered Innovation</button>
</div>
</div>
<div class="filter-group">
<h4 class="filter-title">Filter by Time Block</h4>
<div class="filter-buttons-container" id="timeblock-filters">
<button class="btn btn-filter btn-filter-all active" data-filter="all" onclick="toggleFilter('timeblock', 'all', this)">All Time Blocks</button>
<button class="btn btn-filter color-1" data-filter="1" onclick="toggleFilter('timeblock', '1', this)">Block 1</button>
<button class="btn btn-filter color-3" data-filter="2" onclick="toggleFilter('timeblock', '2', this)">Block 2</button>
<button class="btn btn-filter color-4" data-filter="3" onclick="toggleFilter('timeblock', '3', this)">Block 3</button>
</div>
</div>
<div class="filter-group">
<h4 class="filter-title">Filter by Tag</h4>
<div class="filter-buttons-container" id="tag-filters">
<button class="btn btn-filter btn-filter-all active" data-filter="all" onclick="toggleFilter('tag', 'all', this)">All Tags</button>
</div>
</div>
<div class="filter-group">
<h4 class="filter-title">Search &amp; Clear</h4>
<div class="input-group mb-2"> <input class="form-control form-control-sm" id="search-input" placeholder="Search sessions..." type="text"/> <button class="btn btn-outline-secondary btn-sm" id="search-button" onclick="applyFilters()" type="button">
<i class="bi bi-search"></i>
</button>
</div>
<button class="btn btn-outline-secondary btn-sm w-100" id="clear-filters-button" onclick="resetAllFilters()">Clear All Filters</button> </div>
</div>
</div>
<div class="col-lg-9">
<h2 class="mb-3 header-red">Conference Sessions</h2>
<div id="loading" style="text-align: center; padding: 40px 20px; font-size: 1.2rem; color: var(--lc-red); display: none;">
<div class="spinner-border" role="status" style="width: 3rem; height: 3rem; margin-bottom: 1rem; color: var(--lc-red);">
<span class="visually-hidden">Loading...</span>
</div>
<p>Loading sessions...</p>
</div>
<div class="alert alert-info hidden" id="no-results" role="alert" style="margin-top: 2rem; padding: 1.5rem; font-size: 1.1rem; display: none;">
        No sessions match the current filters.
    </div>
<div class="row" id="sessions-container"><div class="session-card 1: AI in the Classroom" data-strand="1: AI in the Classroom" data-type="workshop"><div class="session-title">Expanding Inquiry: Using AI Tools to Create Simulations and Investigations</div><div class="session-presenter">Melissa Poole, Steve Armandt</div><div class="session-time-room">10:15 - 11:15 | Brush 202</div><div class="session-tags"><span class="tag">Simulations</span><span class="tag">AI Skills</span></div></div><div class="session-card 2: Human-Centered Innovation" data-strand="2: Human-Centered Innovation" data-type="workshop"><div class="session-title">Digital Dependency vs. Human Connection: Educational Strategies for the AI Character Era</div><div class="session-presenter">Suzanne Ellinwood</div><div class="session-time-room">11:30 - 12:30 | Brush 314</div><div class="session-tags"><span class="tag">AI Friends</span><span class="tag">Student Life</span></div></div><div class="session-card 2: Human-Centered Innovation" data-strand="2: Human-Centered Innovation" data-type="presentation"><div class="session-title">Student Buy-In and "Ungrading" in the Humanities Classroom</div><div class="session-presenter">Caitie Cotton</div><div class="session-time-room">10:15 - 11:15 | Brush 203</div><div class="session-tags"><span class="tag">Provocative Ideas</span><span class="tag">Humanities</span></div></div><div class="session-card 1: AI in the Classroom" data-strand="1: AI in the Classroom" data-type="presentation"><div class="session-title">The Value of Struggle: Preserving Meaningful Learning in an AI Age</div><div class="session-presenter">Marta Napiorkowska</div><div class="session-time-room">10:15 - 11:15 | Kravis Center</div><div class="session-tags"><span class="tag">Provocative Ideas</span><span class="tag">Humanities</span></div></div><div class="session-card 2: Human-Centered Innovation" data-strand="2: Human-Centered Innovation" data-type="discussion"><div class="session-title">Slavery and Loomis Chaffee: An Ethical History Project: Collaborating with Students to Make Meaning in and out of the Classroom</div><div class="session-presenter">Eric LaForest, Elliott Dial, Karen Parsons</div><div class="session-time-room">11:30 - 12:30 | Brush 202</div><div class="session-tags"><span class="tag">Provocative Ideas</span><span class="tag">Humanities</span><span class="tag">Curriculum Design</span></div></div><div class="session-card 2: Human-Centered Innovation" data-strand="2: Human-Centered Innovation" data-type="presentation"><div class="session-title">Place-Based Education in the Era of AI</div><div class="session-presenter">Marley Matlack, Sarah Griggs</div><div class="session-time-room">11:30 - 12:30 | Brush 203</div><div class="session-tags"><span class="tag">Place-Based Education</span><span class="tag">AI Skills</span></div></div><div class="session-card 2: Human-Centered Innovation" data-strand="2: Human-Centered Innovation" data-type="workshop"><div class="session-title">Creating a Student Learning Praxis in the Age of AI</div><div class="session-presenter">Richard Scullin</div><div class="session-time-room">11:30 - 12:30 | Brush 306</div><div class="session-tags"><span class="tag">Curriculum Design</span></div></div><div class="session-card 2: Human-Centered Innovation" data-strand="2: Human-Centered Innovation" data-type="discussion"><div class="session-title">Metacognition and AI: Empowering High School Students to Become Strategic Learners in a Technological World</div><div class="session-presenter">Luke Peterson</div><div class="session-time-room">11:30 - 12:30 | Brush 308</div><div class="session-tags"><span class="tag">Metacognition</span><span class="tag">Curriculum Design</span></div></div><div class="session-card 2: Human-Centered Innovation" data-strand="2: Human-Centered Innovation" data-type="presentation"><div class="session-title">What's in a Name: Metaphors We Write By</div><div class="session-presenter">John Morrell</div><div class="session-time-room">11:30 - 12:30 | Writing Center</div><div class="session-tags"><span class="tag">Provocative Ideas</span><span class="tag">Humanities</span></div></div><div class="session-card 1: AI in the Classroom" data-strand="1: AI in the Classroom" data-type="presentation"><div class="session-title">AI-Adapted Writing Assignments for Skill Development and AI Literacy </div><div class="session-presenter">Ron Spalletta</div><div class="session-time-room">1:30 - 2:30 | Brush 302</div><div class="session-tags"><span class="tag">Curriculum Design</span><span class="tag">Humanities</span></div></div><div class="session-card 1: AI in the Classroom" data-strand="1: AI in the Classroom" data-type="workshop"><div class="session-title">Lessons Learned from (Co-Lab)orating Across Schools</div><div class="session-presenter">Ned Heckman, Maureen Russo-Rodriguez</div><div class="session-time-room">10:15 - 11:15 | Brush 314</div><div class="session-tags"><span class="tag">Professional Development</span><span class="tag">AI Skills</span></div></div><div class="session-card 1: AI in the Classroom" data-strand="1: AI in the Classroom" data-type="workshop"><div class="session-title">Ctrl+Alt+Engage: Rebooting Classrooms with AI Simulations</div><div class="session-presenter">Steph Sperber</div><div class="session-time-room">11:30 - 12:30 | Brush 310</div><div class="session-tags"><span class="tag">Simulations</span><span class="tag">AI Skills</span></div></div><div class="session-card 2: Human-Centered Innovation" data-strand="2: Human-Centered Innovation" data-type="presentation"><div class="session-title">Better Together: How Human Connection Transforms AI into an Effective Educational Partner</div><div class="session-presenter">Kate Seyboth</div><div class="session-time-room">10:15 - 11:15 | Brush 310</div><div class="session-tags"><span class="tag">Collaboration</span><span class="tag">AI Skills</span></div></div><div class="session-card 2: Human-Centered Innovation" data-strand="2: Human-Centered Innovation" data-type="presentation"><div class="session-title">Low-Tech Reading: Strategies for Engaging High-Tech Screenagers</div><div class="session-presenter">Lena Sadowitz</div><div class="session-time-room">11:30 - 12:30 | Brush 2nd Floor</div><div class="session-tags"><span class="tag">Curriculum Design</span><span class="tag">Reading</span></div></div><div class="session-card 2: Human-Centered Innovation" data-strand="2: Human-Centered Innovation" data-type="presentation"><div class="session-title">What Learning Science Tells Us about Teaching with AI</div><div class="session-presenter">Peter Nilsson, Maya Bialik</div><div class="session-time-room">10:15 - 11:15 | Pearse Hub for Innovation</div><div class="session-tags"><span class="tag">Curriculum Design</span></div></div><div class="session-card 1: AI in the Classroom" data-strand="1: AI in the Classroom" data-type="workshop"><div class="session-title">Leverage AI to Support Teaching Your Passions</div><div class="session-presenter">Peter Nilsson, Maya Bialik</div><div class="session-time-room">11:30 - 12:30 | Pearse Hub for Innovation</div><div class="session-tags"><span class="tag">Curriculum Design</span></div></div><div class="session-card 1: AI in the Classroom" data-strand="1: AI in the Classroom" data-type="workshop"><div class="session-title">How To Define and Draw Clear Lines for Appropriate AI Use </div><div class="session-presenter">Peter Nilsson, Maya Bialik</div><div class="session-time-room">1:30 - 2:30 | Pearse Hub for Innovation</div><div class="session-tags"><span class="tag">Curriculum Design</span></div></div><div class="session-card 1: AI in the Classroom" data-strand="1: AI in the Classroom" data-type="workshop"><div class="session-title">Build-a-Bot Workshop: Make Your Own AI to Make Sense of AI</div><div class="session-presenter">Lista Lincoln</div><div class="session-time-room">1:30 - 2:30 | Brush 310</div><div class="session-tags"><span class="tag">AI Skills</span></div></div><div class="session-card 2: Human-Centered Innovation" data-strand="2: Human-Centered Innovation" data-type="presentation"><div class="session-title">From Curiosity to Community: Launching a Teacher-Led Gen AI Professional Development Initiative</div><div class="session-presenter">Heidi Hojnicki, Dr. Rachel Heffner-Burns</div><div class="session-time-room">11:30 - 12:30 | Brush 201</div><div class="session-tags"><span class="tag">Professional Development</span><span class="tag">AI Skills</span></div></div><div class="session-card 2: Human-Centered Innovation" data-strand="2: Human-Centered Innovation" data-type="presentation"><div class="session-title">Annie Murphy Paul Breakout Session: Deeper Dive into "Thinking with our Surroundings" from The Extended Mind</div><div class="session-presenter">Annie Murphy Paul</div><div class="session-time-room">10:15 - 11:15 | Hubbard Auditorium</div><div class="session-tags"><span class="tag">Place-Based Education</span></div></div><div class="session-card 2: Human-Centered Innovation" data-strand="2: Human-Centered Innovation" data-type="discussion"><div class="session-title">Teaching Student Presentation Skills</div><div class="session-presenter">Scott MacClintic</div><div class="session-time-room">1:30 - 2:30 | Brush 306</div><div class="session-tags"><span class="tag">Curriculum Design</span></div></div><div class="session-card 2: Human-Centered Innovation" data-strand="2: Human-Centered Innovation" data-type="workshop"><div class="session-title">Untethered Thinking: Design Thinking Frameworks for Tech-Free Student Brainstorms</div><div class="session-presenter">Jen Solomon</div><div class="session-time-room">10:15 - 11:15 | Brush 308</div><div class="session-tags"><span class="tag">Design Thinking</span><span class="tag">Curriculum Design</span></div></div><div class="session-card 1: AI in the Classroom" data-strand="1: AI in the Classroom" data-type="presentation"><div class="session-title">Dangerous (Artificial) Minds: Engaging student critical thinking and analysis in their interactions with AI</div><div class="session-presenter">David Nurenberg</div><div class="session-time-room">10:15 - 11:15 | Brush 201</div><div class="session-tags"><span class="tag">Humanities</span><span class="tag">Curriculum Design</span></div></div><div class="session-card 1: AI in the Classroom" data-strand="1: AI in the Classroom" data-type="presentation"><div class="session-title">Pre-Skilling for the Unknown: Building a Human-Centered AI Culture in Schools</div><div class="session-presenter">Meghan Chew, Sue Teyan, Erin O’Grady, Marc Maier, Nina Yuen</div><div class="session-time-room">1:30 - 2:30 | Brush 203</div><div class="session-tags"><span class="tag">Professional Development</span></div></div><div class="session-card 1: AI in the Classroom" data-strand="1: AI in the Classroom" data-type="discussion"><div class="session-title">Rethinking Creative and Critical Thinking in the Age of AI</div><div class="session-presenter">Adam Alsamadisi</div><div class="session-time-room">10:15 - 11:15 | Brush 2nd Floor</div><div class="session-tags"><span class="tag">Curriculum Design</span><span class="tag">AI Skills</span></div></div><div class="session-card 1: AI in the Classroom" data-strand="1: AI in the Classroom" data-type="presentation"><div class="session-title">Do Androids Dream: Teaching AI Literacy Through Literature</div><div class="session-presenter">Jennifer Blue, Anne Peterson</div><div class="session-time-room">1:30 - 2:30 | Writing Center</div><div class="session-tags"><span class="tag">Curriculum Design</span></div></div></div>
</div>
</div>
</div>
<footer>
<div class="container">
<div class="row">
<div class="col-md-8">
<h4>Loomis Chaffee</h4>
<p class="mb-0">4 Batchelder Road, Windsor, CT 06095</p>
<!-- Copyright removed -->
</div>
</div>
</div>
</footer>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
<script>
        // NOTE: This script assumes the fonts 'Proxima Nova' and 'Financier Display'
        // are loaded globally via the website's main CSS or a font service.
        document.addEventListener('DOMContentLoaded', function() {
            let allSessionData = []; // Store all sessions
            let uniqueSortedTimeBlocks = []; // Store unique time blocks for filter population
            const sessionsContainer = document.getElementById('sessions-container');
            const searchInput = document.getElementById('search-input');
            const loadingElement = document.getElementById('loading');
            const noResultsDiv = document.getElementById('no-results');

            // Active filters state
            let activeFilters = {
                strand: ['all'],
                timeblock: ['all'],
                tag: ['all']
            };

            // --- Helper function for canonical strand keys ---
            function getCanonicalStrandFilterKey(sessionStrandField) {
                if (!sessionStrandField) return null;
                const sTrimmed = String(sessionStrandField).trim();
                if (sTrimmed.startsWith('1:')) return 'strand1';
                if (sTrimmed.startsWith('2:')) return 'strand2';
                // Add other mappings if necessary, e.g., for Strand 3, 4
                // if (sTrimmed.startsWith('3:')) return 'strand3';
                // if (sTrimmed.startsWith('4:')) return 'strand4';
                
                // This function is primarily for mapping actual strands from the CSV.
                // Special events are usually identified by session.isSpecialEvent = true.
                // The filtering logic in applyFilters might handle a 'special' filter key separately
                // if a 'Special Events' filter button were to be added to the strand filters.
                return null; 
            }
            
            // --- Function to fetch session data ---
            async function loadSessionData() {
                if (loadingElement) loadingElement.style.display = 'block';
                try {
                    const response = await fetch('sessions.json');
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    allSessionData = await response.json();

                    if (!Array.isArray(allSessionData)) {
                        console.error("Fetched data is not an array:", allSessionData);
                        allSessionData = []; 
                        if (noResultsDiv) {
                            noResultsDiv.textContent = 'Error: Session data is not in the expected format.';
                            noResultsDiv.classList.remove('hidden');
                        }
                    }

                    // Pre-process to find all unique time blocks
                    const allTimeBlocksFromData = new Set();
                    allSessionData.forEach(session => {
                        if (session.isSpecialEvent && session.timeBlock) {
                            allTimeBlocksFromData.add(String(session.timeBlock).trim());
                        } else if (session.occurrences && Array.isArray(session.occurrences) && session.occurrences.length > 0) {
                            session.occurrences.forEach(occ => {
                                if (occ.timeBlock) {
                                    allTimeBlocksFromData.add(String(occ.timeBlock).trim());
                                }
                            });
                        }
                    });
                    uniqueSortedTimeBlocks = Array.from(allTimeBlocksFromData).sort((a, b) => {
                        // Basic sort: assumes "HH:MM" format for start time
                        const startTimeA = a.split(' - ')[0];
                        const startTimeB = b.split(' - ')[0];
                        return startTimeA.localeCompare(startTimeB);
                    });


                    populateStrandFilters(allSessionData);
                    populateTimeBlockFilters();
                    populateTagFilters(allSessionData);
                    applyFilters(); 

                } catch (error) {
                    console.error('Error loading session data:', error);
                    if (sessionsContainer) sessionsContainer.innerHTML = '<p class="text-danger text-center">Could not load session data. Please try again later.</p>';
                    if (noResultsDiv) {
                        noResultsDiv.textContent = 'Could not load session data. Please try again later.';
                        noResultsDiv.classList.remove('hidden');
                    }
                    allSessionData = [];
                } finally {
                    if (loadingElement) loadingElement.style.display = 'none';
                }
            }

            // --- Function to populate strand filters ---
            function populateStrandFilters(sessions) {
                const strandFiltersContainer = document.getElementById('strand-filters');
                if (!strandFiltersContainer) {
                    console.warn('Strand filters container (#strand-filters) not found.');
                    return;
                }
                strandFiltersContainer.innerHTML = ''; 

                const predefinedStrandsConfig = [
                    { key: 'strand1', name: '1: AI in the Classroom', colorClassCss: 'color-1' },
                    { key: 'strand2', name: '2: Human-Centered Innovation', colorClassCss: 'color-2' },
                    // { key: 'special', name: 'Special Events', colorClassCss: 'color-5' } // Example if special events are filterable this way
                ];

                const availableStrandsDisplay = new Map();
                sessions.forEach(session => {
                    const canonicalKey = getCanonicalStrandFilterKey(session.strand);
                    if (canonicalKey) {
                        if (!availableStrandsDisplay.has(canonicalKey)) {
                            const config = predefinedStrandsConfig.find(p => p.key === canonicalKey);
                            availableStrandsDisplay.set(canonicalKey, {
                                name: session.strandName || (config ? config.name : canonicalKey),
                                colorClass: config ? config.colorClassCss : 'color-1' 
                            });
                        } else if (session.strandName && availableStrandsDisplay.get(canonicalKey).name === canonicalKey) {
                             availableStrandsDisplay.get(canonicalKey).name = session.strandName;
                        }
                    }
                });
                
                const allButton = document.createElement('button');
                allButton.className = 'btn btn-filter btn-filter-all active';
                allButton.dataset.filter = 'all';
                allButton.textContent = 'All Strands';
                allButton.onclick = () => toggleFilter('strand', 'all', allButton);
                strandFiltersContainer.appendChild(allButton);

                predefinedStrandsConfig.forEach(conf => {
                    if (availableStrandsDisplay.has(conf.key)) {
                        const strandData = availableStrandsDisplay.get(conf.key);
                        const strandButton = document.createElement('button');
                        strandButton.className = `btn btn-filter ${strandData.colorClass}`; 
                        strandButton.dataset.filter = conf.key;
                        strandButton.textContent = strandData.name;
                        strandButton.onclick = () => toggleFilter('strand', conf.key, strandButton);
                        strandFiltersContainer.appendChild(strandButton);
                    }
                });
            }
            
            // --- Function to populate time block filters ---
            function populateTimeBlockFilters() { 
                const timeBlockFiltersContainer = document.getElementById('timeblock-filters');
                if (!timeBlockFiltersContainer) {
                    console.warn('Time block filters container (#timeblock-filters) not found.');
                    return;
                }
                timeBlockFiltersContainer.innerHTML = ''; // Clear existing static buttons

                const allButton = document.createElement('button');
                allButton.className = 'btn btn-filter btn-filter-all active';
                allButton.dataset.filter = 'all';
                allButton.textContent = 'All Time Blocks';
                allButton.onclick = () => toggleFilter('timeblock', 'all', allButton);
                timeBlockFiltersContainer.appendChild(allButton);

                const predefinedTimeBlocks = [
                    { label: "Block 1", time: "10:15 - 11:15" },
                    { label: "Block 2", time: "11:30 - 12:30" },
                    { label: "Block 3", time: "1:30 - 2:30" }
                ];

                predefinedTimeBlocks.forEach((block, index) => {
                    const timeBlockButton = document.createElement('button');
                    // Cycle through 5 color classes for variety
                    timeBlockButton.className = `btn btn-filter color-${(index % 5) + 1}`; 
                    timeBlockButton.dataset.filter = block.time; // Use actual time string for filtering
                    timeBlockButton.textContent = `${block.label} (${block.time})`; 
                    timeBlockButton.onclick = () => toggleFilter('timeblock', block.time, timeBlockButton);
                    timeBlockFiltersContainer.appendChild(timeBlockButton);
                });
            }

            // --- Function to populate tag filters ---
            function populateTagFilters(sessions) {
                const tagFiltersContainer = document.getElementById('tag-filters');
                if (!tagFiltersContainer) {
                    console.warn('Tag filters container (#tag-filters) not found.');
                    return;
                }
                tagFiltersContainer.innerHTML = ''; 

                const allTagsButton = document.createElement('button');
                allTagsButton.className = 'btn btn-filter btn-filter-all active';
                allTagsButton.dataset.filter = 'all';
                allTagsButton.textContent = 'All Tags';
                allTagsButton.onclick = () => toggleFilter('tag', 'all', allTagsButton);
                tagFiltersContainer.appendChild(allTagsButton);

                const uniqueTags = new Set();
                sessions.forEach(session => {
                    if (session.tags && Array.isArray(session.tags)) {
                        session.tags.forEach(tag => {
                            const trimmedTag = String(tag).trim();
                            if (trimmedTag) uniqueTags.add(trimmedTag);
                        });
                    }
                });

                let colorIndex = 1;
                Array.from(uniqueTags).sort().forEach(tagText => {
                    // MODIFIED: Use the original tag text (trimmed, lowercased) for the filter value
                    const tagFilterValue = String(tagText).trim().toLowerCase();
                    if (!tagFilterValue) return; 

                    const tagButton = document.createElement('button');
                    tagButton.className = `btn btn-filter color-${((colorIndex - 1) % 5) + 1}`;
                    tagButton.dataset.filter = tagFilterValue; // Store the processed original tag text
                    tagButton.textContent = tagText;
                    tagButton.onclick = () => toggleFilter('tag', tagFilterValue, tagButton);
                    tagFiltersContainer.appendChild(tagButton);
                    colorIndex++;
                });
            }

            // --- Function to render sessions ---
            function renderSessions(sessionsToRender) {
                if (!sessionsContainer) {
                    console.error('Session container not found');
                    return;
                }
                sessionsContainer.innerHTML = ''; 

                if (!sessionsToRender || sessionsToRender.length === 0) {
                    return;
                }

                sessionsToRender.forEach(session => {
                    const sessionCardWrapper = document.createElement('div');
                    sessionCardWrapper.className = 'col-12 mb-4 session-card-wrapper'; 

                    let visualStrandClass = '';
                    if (session.isSpecialEvent || (session.type && String(session.type).toLowerCase() === 'special')) {
                        visualStrandClass = 'strandSpecial';
                    } else {
                        const determinedStrandKey = getCanonicalStrandFilterKey(session.strand);
                        if (determinedStrandKey) {
                            visualStrandClass = determinedStrandKey;
                        }
                        // If session.strand is something else and not a special event, 
                        // visualStrandClass remains empty, so no specific strand color bar will be applied,
                        // which is reasonable if it doesn't map to a defined strand.
                    }
                    
                    let typeClass = 'type-default';
                    if (session.type) {
                        const typeNormalized = String(session.typeName || session.type).toLowerCase().replace(/\s+/g, '-');
                        const typeMappings = {
                            'workshop': 'type-workshop', 'presentation': 'type-presentation', 
                            'discussion': 'type-discussion', 'panel': 'type-panel', 
                            'keynote': 'type-keynote', 'facilitated': 'type-facilitated', 
                            'special': 'type-special', 'q&a': 'type-presentation', 'activity': 'type-workshop'
                        };
                        for (const keyword in typeMappings) {
                            if (typeNormalized.includes(keyword)) {
                                typeClass = typeMappings[keyword];
                                break;
                            }
                        }
                    }

                    let presenterHTML = '';
                    if (session.presenter && String(session.presenter).trim() !== '') {
                        const presenters = String(session.presenter).split(/,\s*(?![^()]*\))|\s+and\s+/i);
                        const organizations = session.organization ? String(session.organization).split(/,\s*(?![^()]*\))|\s+and\s+/i) : [];
                        presenterHTML = presenters.map((name, index) => {
                            let orgName = '';
                            if (organizations.length === 1 && organizations[0].trim() !== '') orgName = organizations[0];
                            else if (organizations.length > index && organizations[index].trim() !== '') orgName = organizations[index];
                            const org = orgName ? `<em>${String(orgName).trim()}</em>` : '';
                            return `<strong>${String(name).trim()}</strong>${org ? ' ' + org : ''}`;
                        }).join(', ');
                    }

                    let occurrencesHTML = '';
                    if (session.isSpecialEvent && session.timeBlock && session.location) {
                         occurrencesHTML = `<div class="session-meta-item"><i class="bi bi-clock-fill"></i> ${session.timeBlock} <span style="margin: 0 0.5em;">|</span> <i class="bi bi-geo-alt-fill"></i> ${session.location}</div>`;
                    } else if (session.occurrences && session.occurrences.length > 0) {
                        occurrencesHTML = session.occurrences.map(occurrence => {
                            const time = occurrence.timeBlock || 'Time TBD';
                            const room = occurrence.location || 'Location TBD';
                            return `<div class="session-meta-item"><i class="bi bi-clock-fill"></i> ${time} <span style="margin: 0 0.5em;">|</span> <i class="bi bi-geo-alt-fill"></i> ${room}</div>`;
                        }).join('');
                    } else { // Fallback for sessions without occurrences array but not special event (should be rare)
                        const time = session.timeBlock || 'Time TBD';
                        const room = session.location || session.room || 'Location TBD';
                        occurrencesHTML = `<div class="session-meta-item"><i class="bi bi-clock-fill"></i> ${time} <span style="margin: 0 0.5em;">|</span> <i class="bi bi-geo-alt-fill"></i> ${room}</div>`;
                    }

                    const descriptionHTML = session.description_html || session.description || 'No description available.';
                    const uniqueDescId = `desc-${session.id || Math.random().toString(36).substr(2, 9)}`;
                    const uniqueBtnId = `btn-${session.id || Math.random().toString(36).substr(2, 9)}`;

                    const cardInnerDiv = document.createElement('div');
                    cardInnerDiv.className = `session-card ${visualStrandClass} ${typeClass}`;
                    cardInnerDiv.dataset.sessionId = session.id;
                    
                    cardInnerDiv.innerHTML = `
                        <div class="strand-indicator"></div>
                        <div class="session-type">${session.typeName || session.type || 'Session'}</div>
                        <h5 class="session-title"><span>${session.title || 'Untitled Session'}</span></h5>
                        <div class="session-presenter mb-2">${presenterHTML || 'Presenter TBD'}</div>
                        ${occurrencesHTML}
                        <div class="session-description-wrapper" id="${uniqueDescId}">
                            <div class="session-description-content">${descriptionHTML}</div>
                        </div>
                        <button class="toggle-description" id="${uniqueBtnId}" onclick="toggleDescription(event, '${uniqueDescId}', '${uniqueBtnId}')">Read more</button>
                        <div class="session-tags mt-auto pt-2">
                            <strong>Tags:</strong> ${session.tags && Array.isArray(session.tags) && session.tags.length > 0 ? session.tags.map(tag => `<span class="tag">${String(tag).trim()}</span>`).join('') : 'None'}
                        </div>
                    `;
                    sessionCardWrapper.appendChild(cardInnerDiv);
                    sessionsContainer.appendChild(sessionCardWrapper);
                });
            }

            window.toggleDescription = function(event, wrapperId, buttonId) {
                event.preventDefault(); 
                event.stopPropagation(); 
                const wrapper = document.getElementById(wrapperId);
                const toggleButton = document.getElementById(buttonId);
                if (wrapper && toggleButton) {
                    wrapper.classList.toggle('expanded');
                    toggleButton.textContent = wrapper.classList.contains('expanded') ? 'Show Less' : 'Read More';
                }
            };

            window.toggleFilter = function(group, value, element) {
                const filterGroup = activeFilters[group];
                const allButton = document.querySelector(`#${group}-filters .btn-filter-all`);

                if (value === 'all') {
                    if (!element.classList.contains('active')) { 
                        document.querySelectorAll(`#${group}-filters .btn-filter`).forEach(btn => btn.classList.remove('active'));
                        element.classList.add('active');
                        activeFilters[group] = ['all'];
                    }
                } else {
                    if (allButton && allButton.classList.contains('active')) {
                        allButton.classList.remove('active');
                        activeFilters[group] = [];
                    }

                    if (element.classList.contains('active')) {
                        element.classList.remove('active');
                        activeFilters[group] = filterGroup.filter(f => f !== value);
                    } else {
                        element.classList.add('active');
                        activeFilters[group].push(value);
                    }

                    if (activeFilters[group].length === 0 && allButton) {
                        allButton.classList.add('active');
                        activeFilters[group] = ['all'];
                    }
                }
                applyFilters();
            };

            window.applyFilters = function() {
                const searchTerm = searchInput.value.toLowerCase().trim();

                if (!allSessionData) { 
                    if (loadingElement && loadingElement.style.display !== 'none') return; 
                    if (noResultsDiv) {
                        noResultsDiv.textContent = "Session data not available.";
                        noResultsDiv.classList.remove('hidden');
                    }
                    if (sessionsContainer) sessionsContainer.innerHTML = '';
                    return; // Exit if data isn't loaded
                }
                
                let filteredSessions = allSessionData;

                // Search filter (text input)
                if (searchTerm) {
                    filteredSessions = filteredSessions.filter(session => {
                        const title = String(session.title || '').toLowerCase();
                        const presenter = String(session.presenter || '').toLowerCase();
                        const description = String(session.description || '').toLowerCase();
                        const tags = Array.isArray(session.tags) ? session.tags.join(' ').toLowerCase() : '';
                        return title.includes(searchTerm) || 
                               presenter.includes(searchTerm) || 
                               description.includes(searchTerm) ||
                               tags.includes(searchTerm);
                    });
                }

                // Strand filter
                if (!activeFilters.strand.includes('all')) {
                    filteredSessions = filteredSessions.filter(session => {
                        const canonicalKey = getCanonicalStrandFilterKey(session.strand);
                        // A session passes if its canonical strand key is in the active strand filters.
                        // Special events are not filtered by these strand keys unless a specific 'special' filter is added.
                        return canonicalKey && activeFilters.strand.includes(canonicalKey);
                    });
                }

                // Time block filter
                if (!activeFilters.timeblock.includes('all')) {
                    filteredSessions = filteredSessions.filter(session => {
                        const sessionTimeBlocks = [];
                        if (session.isSpecialEvent && session.timeBlock) {
                            sessionTimeBlocks.push(String(session.timeBlock).trim());
                        } else if (session.occurrences && Array.isArray(session.occurrences)) {
                            session.occurrences.forEach(occ => {
                                if (occ.timeBlock) {
                                    sessionTimeBlocks.push(String(occ.timeBlock).trim());
                                }
                            });
                        }
                        // Check if any of the session's time blocks match any of the active time block filters
                        return activeFilters.timeblock.some(filterTime => sessionTimeBlocks.includes(filterTime));
                    });
                }

                // Tag filter
                if (!activeFilters.tag.includes('all')) {
                    filteredSessions = filteredSessions.filter(session => {
                        if (!session.tags || !Array.isArray(session.tags) || session.tags.length === 0) {
                            return false; 
                        }
                        // A session passes if any of its tags (trimmed and lowercased) 
                        // are present in the active tag filters.
                        return session.tags.some(tag => {
                            const sessionTagProcessed = String(tag).trim().toLowerCase();
                            return activeFilters.tag.includes(sessionTagProcessed);
                        });
                    });
                }

                renderSessions(filteredSessions);

                if (noResultsDiv) {
                    if (filteredSessions.length === 0) {
                        noResultsDiv.classList.remove('hidden');
                    } else {
                        noResultsDiv.classList.add('hidden');
                    }
                }
            };

            // --- Function to reset all filters ---
            window.resetAllFilters = function() {
                activeFilters.strand = ['all'];
                activeFilters.timeblock = ['all'];
                activeFilters.tag = ['all'];

                ['strand', 'timeblock', 'tag'].forEach(group => {
                     const groupContainer = document.getElementById(`${group}-filters`);
                     if (groupContainer) {
                        groupContainer.querySelectorAll('.btn-filter').forEach(button => {
                            button.classList.toggle('active', button.dataset.filter === 'all');
                        });
                     }
                 });

                if (searchInput) searchInput.value = '';
                applyFilters();
            };

            if (searchInput) {
                searchInput.addEventListener('input', () => { 
                    applyFilters(); 
                });
                searchInput.addEventListener('keypress', (event) => {
                    if (event.key === 'Enter') {
                        event.preventDefault(); 
                        applyFilters();
                    }
                });
            }
            
            loadSessionData();

        }); // End DOMContentLoaded
    </script>
</body>
</html>
